## Python基础语法



#### 缩进

**缩进**表示**程序框架**和**层次关系**,一般用4个空格或1个TAB,但需要在程序内一致



#### 分号

多行代码写在一行时,用分号分隔



#### 换行

一行代码写在多行,用`\`进行连接

#### 注释

`#` 单行注释

`'''`

多行注释

`'''`



#### 命名

关联标识符的过程叫命名



#### 标识符

大小写字母,数字,下划线,**汉字**等组合,首字符不能是数字

`True`真	`False`假



#### 保留字

```
关系
and	or	not	True	False
库引用
import	as	from
循环
for	in	while	continue	break
条件
if	elif	else
函数
def	return
类
class	try
```



#### 赋值语句

右值的数值和**类型**赋给左值的变量



#### 输入

```
<变量> = input(<提示信息>)	input得到的是字符串类型,需要用eval函数去掉两侧引号
string = input("请输入")
```

#### 输出

```
print(<字符串或变量>)

print("转换后的温度是{:.2f}C".format(C))
{}表示槽,变量会填充到槽中	:是固定格式
.2f表示是取两位小数的浮点数

print("Hello:",0)	用","连接各种输出信息	print会自动在输出信息之间添加一个空格
结果:Hello: 0

print("Hello world!",end="") end表示结尾

print("执行开始".center(scale//2,"-"))用'-'来填充
```



#### 评估函数`eval()`

去掉参数最外侧的引号并执行对应的语句

```
eval(<字符串或变量>)
eval('1+2')				输出:3
eval('"1+2"')			输出:'1+2'
eval('print("Hello")')	输出:Hello
```

 

#### 库引用

```
import <库名>
<库名>.<函数名>(<函数参数>)
```

```
from <库名> import <函数名>
或
from <库名> import * 

就可以直接使用库中的函数名直接访问库中函数了,不需要使用"."运算符
```

```
import <库名> as <库别名>
<库别名>.<函数名>(<函数参数>)
```



#### range()函数

产生循环计数序列

```
range(N)		产生0..N-1的整数序列	共N个
range(M[, N])		产生M..N-1的整数序列	共N-M个
range(M[, N, K]) 从M到N-1每次递增K
```



#### 内嵌函数

* `sorted(x)`对x排序
* `len(x)`计算x的长度
* `type(x)`返回x的类型
* `map(fun,<组合数据类型>)`将函数`fun`作用于组合数据的每一个元素



## 基本数据类型



#### 1.整数类型

* 数学中的整数,可正可负,没有范围
* `pow(x,y)`计算`x`的`y`次方
* 四种进制表示
  * 十进制:`99, -99`
  * 二进制,`0b/0B`开头:`0b010, -0B101`
  * 八进制,`0o/0O`开头:`0o123, -0O456`
  * 十六进制,`0x/0X`开头:`0x9a, -0X89`



#### 2.浮点数类型

* 数学中的实数,有取值范围和小数精度的限制,但忽略

* 取值范围数量级约为-10<sup>308</sup>sup>~10<sup>308</sup>,精度数量级10<sup>-16</sup>

* 53位二进制数表示小数部分,输出时默认输出十进制的16位小数

* ```
  round(x,d):对x四舍五入,d是保留的位数
  ```

* 科学计数法: \<a>e\<b> 表示 a*10<sup>b</sup> 



#### 3.复数类型

* `z = -1 + 2j`
* 空间变换,复变函数



#### 数值运算操作符

```
+ - * / 加减乘除
注:除法的结果是浮点数		10/3 的结果为3.33333333333333335
// 整除	10/3的结果为3
+x 	x本身
-y	y的负值
x%y	取余
x**y	幂运算,x的y次幂	例:当y为0.5时是开平方运算

二元操作符的增强赋值操作符
+=	-=	*= 	/=
//=	%=	**=
```



#### 数字类型的关系

* 混合运算时,结果为"最宽"的类型
* 三种类型逐渐变宽
  * 整数	->	浮点数	->	复数



#### 数值运算函数

* `abs(x)`	x的绝对值
* `divmod(x,y)`   x除以y,输出商和余数	例:divmod(10,3)结果为(3,-1)
* `pow(x,y[,z])` x的y次幂对z取余,[..]表示参数z可省略
* `round(x[,d])` 四舍五入,d为保留的小数位数,默认为0
* `max(x1,x2,...,xn)` 返回最大值,n不限
* `mix(x1,x2,...,xn)` 返回最小值,n不限
* `int(x)`将浮点数,字符串等转化为整数
* `float(x)`将整数,字符串等转化为浮点数
* `complex(x)`将x转化为复数
* `sorted(x)`对x排序
* `len(x)`计算x的长度



#### 4.字符串

* 表示方法
  * 单行字符串:	'	'		"	"	一对单引号和一对双引号
  * 多行字符串:    '''   '''      """      """"     一对三单引号和一对三双引号]
* 字符串的序号
  
  * 正向递增序号和反向递减序号
* 字符串的使用
  * `[]`获取一个或多个字符
  * 索引: `string[0]`
  * 切片: `string[M:N]`
    * `string[M:N]`	M缺失表示至开头,N缺失表示至结尾
    * `[M:N:K]`根据步长`k`对字符串切片
      * `"0123456789"[1:8:2]`结果是`"1357"`
      * `"0123456789"[::-1]`结果是`"9876543210"`

* 转义符 `\`
  * 表达特定字符的本意
  * 形成组合,表示特定含义
    * `\b`回退	`\n`换行(光标移动到下行首)	`\r`回车(光标移动到本行首)

* 字符串操作符
  * `x + y` 连接两个字符串
  * `n * x 或 x * n`  复制n次字符串
  * `x in s`判断x是否为s的字串
* 字符串处理函数
  * `len(x)`返回字符串x的长度
  * `str(x)`将x转化为字符串
  * `oct(x)或hex(x)`将整数x转化为八进制或十六进制的小写形式字符串
  * `chr(u)`返回Unicode编码u对应的字符
  * `ord(x)`返回字符x对应的Unicode编码
* 字符串处理方法
  * 方法
    * "方法"在面向对象编程中是一个专有名词
    * "方法"特指`<a>.<b>()`风格中的函数`<b>()`
    * "方法"是函数,但与`<a>`有关
  * `str.lower()或str.upper()`返回字符串的小写/大写形式 
  * `str.split(sep)`返回一个列表,内容是str被sep分隔的部分
    * `"A,B,C".split(",")`结果为`['A','B','C']`
  * `str.count(sub)`返回字串sub在str中出现的次数
  * `str.replace(old,new)`str字符串中的所有old字串被替换为new字串
  * `str.center(width[,fillchar])`字符串str居中,宽度为width,两侧填充为fillchar
  * `str.strip(chars)`在str两侧去掉chars中列出的字符   `strip剥夺,条`
    * `"= python= ".strip(" =np")`结果为`"ytho"`
  * `str.join(iter)`给iter变量的相邻两个元素间添加一个str
    * `",".join("12345")`结果为`"1,2,3,4,5"`

* 字符串类型的格式化

  * `<模板字符串>.format(<逗号分隔的参数>)`

  * 槽

    * 把`format`中的参数按照对应顺序填入到槽中,默认顺序为从前到后
    * `{1}`表示填入format中的第二个参数(以0为开始)

  * 槽的格式化配置方式

    * 语法`{<参数序号>:<格式控制标记>}`

    * 格式控制

      * ```
        :<填充><对齐><宽度><,><.精度><类型>
        填充:用于填充的单个字符   默认为空格
        对齐: < 左对齐   > 右对齐   ^ 居中对齐   默认为左对齐
        宽度:输出的字符串宽度
        ,:数字的千位分隔符
        .精度: 浮点数的小数精度 或 字符串的最大输出长度
        类型:整数类型:b(二进制),c(Unicode字符),d(十进制),o(八进制),x(小写十六进制),X(大写十六进制)
        	浮点数类型:e(科学计数法),E(科学计数法),f(普通的浮点数表示),%(百分数形式)
        	
        >>>"{0:=^20}".format("PYTHON")
        '=======PYTHON======='
        
        >>>"{0:,.2f}".format(12345.6789)
        '12,345.68'
        ```



## 程序的控制结构



### 1.分支结构

```
if <条件1>:
	...
elif <条件2>:
	...
elif <条件3>:
	...
...

else:
	...
```



#### 紧凑形式

```<>
<表达式1> if <条件> else <表达式2>
输出的是表达式,而不是执行语句
```



#### 条件判断

```
<	<=
> 	>=
==	!=

and	or	not
```



#### 异常处理

```
try:
	...
except:
	...
else:
	...
finally:
	...
若try的部分发生异常,就执行except的部分
不发生异常时,执行else的部分
无论如何,最终一定执行finally的部分

try:
	...
except <异常类型>:
	...
响应对应的异常类型
```





### 2.循环结构



#### 2.1遍历循环

```
for <循环变量> in <遍历结构>:
	...
	
整数遍历
for i in range(M,N,K):
	...
range(M,N,K) 产生一个M..N-1的数字序列,步长为K

字符串遍历
for c in s:
	...

列表遍历
for item in ls:
	...
	
文件遍历
for line in fi:
	...

fi是一个文件标识符,循环遍历每行

元组遍历

字典遍历
```



#### 2.2无限循环

```
while <条件>:
	...
```



#### 循环控制保留字

* `break`跳出并结束循环
* `continue`结束当前循环,继续下轮循环



#### 循环的高级用法

* 当循环没有被`break`语句结束时,会执行`else`语句块

* `else`语句块作为没有执行`break`的奖励

```
for ...	:
	...
else:
	...
	

while ...:
	...
else:
	...
```



## 函数



#### 定义

```
def <函数名>(<非可选参数>,<可选参数>):
	...
	return <返回值>
	
函数定义时的参数是一种占位符
可选参数有一个默认值
```



#### 参数

```
非可选参数	调用时必须给出参数
可选参数	调用时不必给出参数,此时为默认值
可变参数	参数的个数可以改变	组合数据类型
语法:
def	...(<参数>, *<name>):
	...
	return ...

遍历组合结构
for item in name:
	...
```



#### 参数传递

* 按位置传递
  * 位置对应
* 按名称传递
  * 名称指定



#### 函数返回值

* 可以返回0个或多个值

* 返回多个值的话,类型为元组类型

  * ```#### return
    return m,n,k
    
    a,b,c = fun()
    ```



#### 局部变量与全局变量

* 局部变量时函数内的**占位符**,函数结束后会被释放
* 可用`global`保留字,在函数内使用全局变量
* 局部变量为组合数据类型且**不是在函数内部创建**的,等同于全局变量

 

#### lambda匿名函数

函数名是返回的结果

```
<函数名> = lambda <参数>:<表达式>

等价于 
def <函数名>(<参数>):
	表达式
	return <返回值>
	
例:
f = lambda x,y : x + y	函数名为f,参数为x,y,返回值为表达式x+y的值
>>>f(10,15)
25
```



#### 模块化设计

* 紧耦合
  * 两个部分交流很多,无法独立存在
* 松耦合
  * 两个部分交流很少,可以独立存在
* 模块内部紧耦合,模块之间松耦合



#### 递归

* 链条
  * 递归的计算过程是**递归有序**的链条关系
* 基例
  * 基础的实例,不需要再次递归



## 组合数据类型

### 1.集合

* 定义:多个元素的无序组合,与数学中的集合一致

* 元素之间无序,每个元素唯一

* 元素不可修改,不可变数据类型(类似常量)

  * 不可变数据类型:整数,浮点数,复数,字符串,元组

* ```(
  集合用{}表示,元素间用,分隔
  建立集合用{}或set()
  建立空集合必须用set()
  >>> A = set("pypy123")
  {'1', '2', '3', 'p', 'y'}	元素间没有顺序
  ```



#### 集合间操作

````
S|T		并			S |= T
S-T		差			S -= T
S&T		交			S &= T
S^T		补  			S ^= T 
S和T中的非相同元素	S + T - ST

S <= T	S < T
S >= T 	S > T
返回True/False,判断S和T的包含关系
````



#### 集合的处理方法

```
S.add(x)		将x添加到S中
S.discard(x)	移除S中的x;若没有x,不报错
S.remove(x)		移除S中的x;若没有x,则产生KeyError异常
S.clear()		溢出S中所有元素
S.pop()			随即返回并删除S中的一个元素;若S为空,则产生KeyError异常
S.copy()		返回S的一个副本
len(S)			返回S的元素个数
x in S			判断x是否在S中
x not in S		判断x是否不在S中
set(x)			将x转换为集合类型
```



#### 集合的应用

* 判断包含关系
* 数据去重



### 2.序列

#### 定义

具有先后关系的一组元素,类似于线性表

* 一维元素向量,元素可以相等,类型可以是任意的不同类型
* 类似数学元素序列
* 序列是一个基类类型,衍生出:字符串,元组,列表



#### 序列类型通用操作符

```
x in s		判断x是否在s中
x not in s	判断x是否不在s中
s + t		连接s和t
s*n或n*s		序列s复制n次
s[i]		索引第i个元素
s[i:j]或s[i:j:k]	切片,返回s中i到j步长为k的子序列
```



#### 序列类型通用函数和方法

```
len(s)		返回s的长度
min(s)		返回s的最小元素,s中元素必须可比较
max(s)		返回s的最大元素,s中元素必须可比较
s.index(x)或		
s.index(x,i,j)	返回i到j之间第一次出现x元素的下标
s.count(x)	返回s中出现x的次数
```



#### 序列类型应用场景

* 元组:元素不改变
* 列表:灵活,最常用
* 最主要:表示一组**有序数据**并操作这组数据



#### 2.1元组

##### 定义

序列类型的一种扩展

* 一旦创建,不能被修改
* 用`()`或`tuple()`创建,用`,`分隔
* 具体使用时可以不用`()`,如函数返回多个值时
* 继承序列类型的全部通用操作
* 由于元组创建后不可修改,因此没有特殊操作



#### 2.2列表

##### 定义

序列类型的一种扩展

* 元素值可以随意修改,元素类型可以不同
* 用`[]`或`list()`创建,用`,`分隔
* 使用指数,赋值是传递引用
* 只有在创建的时候新建了列表,赋值的时候没有新建列表



##### 列表类型操作函数和方法

```
ls[i] = x		赋值
ls[i:j:K] = lt	用lt替换ls切片对应的子列表
del ls[i]		删除第i个元素
del ls[i:j:k]	删除ls切片对应的子列表中的元素
ls += lt		把lt添加到ls后
ls *= n			ls重复n次
增删改查
ls.append(x)	在ls最后增加元素x
ls.clear()		删除ls所有元素
ls.copy()		赋值生成一个新列表
ls.insert(i,x)	在ls的第i个位置增加元素x
ls.pop(i)		在ls中去除并删除第i个元素
ls.remove(x)	删除ls中出现的第一个元素x
ls.reverse()	将ls中的元素反转
```



### 3.字典

#### 定义

* 映射:键(索引)和值(数据)的对应

* 字典是键值对的集合,无次序

* 用`{}`和`dict()`创建,键值对用`:`分隔,`{}`生成空字典

  * ```
    {<键1>:<值1>,<键2>:<值2>,...,<键n>:<值n>}
    ```



#### 字典类型操作函数和方法

```
d[key] = value	赋值,若key不存在,就添加元素
del d[k]		删除键k的数据
k in d			判断键k是否在d中
d.keys()		返回d中所有的键信息
d.values()		返回d中所有的值信息
d.items()		返回d中所有的元素(键值对)信息
d.get(k,<default>)	键k存在,就返回值;不存在,就返回值<default>
d.pop(k,<default>)	键k存在,就返回并删除相应值;不存在,就返回值<default>
d.popitem()		随机返回一个键值对,类型为元组
d.clear()		删除所有元素
len(d)			返回d中元素的个数
```



#### 字典类型应用场景

* 映射的表达

* 元素遍历

  * ```
    for k in d:
    	...
    ```



## 文件

#### 定义

文件时数据的抽象和集合

* 文件是存储在辅助存储器上的数据序列
* 文件展现形态:文本文件与二进制文件
  * 文本文件:由**单一特定编码**组成的文件,如UTF-8编码.可以看成字符串
    * 例:`.txt`文件,`.py`文件
  * 二进制文件:直接由0和1组成,没有同一的字符编码,但有0和1的组织结构,即文件格式
    * `.png`文件`.avi`文件



#### 文件的使用

##### 打开文件

```
<变量名> = open(<文件名>,<打开模式>)
文件名:文件的路径和名称,路径默认为当前目录	路径:用/分隔,或用//分隔
打开模式:读/写,文件/二进制
'r'		只读模式,默认值;若文件不存在,返回FileNotFoundError
'w'		覆盖写模式,文件不存在就创建
'x'		创建写模式,文件不存在就创建;文件存在,就返回FileExistsError
'a'		追加写模式,文件不存在就创建;文件存在,就写到文件的最后

'b'		二进制文件格式
't'		文本文件格式,默认值

'+'		与r/w/x/a一起使用,在原本的基础上增加同时读写的功能
```



##### 关闭文件

```
<变量名>.close()
变量名:文件句柄
```



##### 读取文件

```
<f>.read(size=-1)		读入前size长度的内容,默认为全部
<f>.readline(size=-1)	读入一行前size长度的内容,默认为一整行
<f>.readlines(hint=-1)	读入前hint行,默认为所有行,返回列表,元素为每行
```



##### 写入文件

```
<f>.write(s)		向文件写入一个字符串或字节流 
<f>.writelines(lines)	将一个列表写入文件,列表元素都是字符串.并不是按行写入,而是元素拼接起来写入
<f>.seek(offset)	设置文件操作指针,offset:0-文件开头,1-当前位置,2-文件结尾
```



### 数据格式化



#### 数据的操作周期

* 存储			表示			操作
* 存储格式    数据类型    操作方式



#### 1.一维数据

#### 表示

* 一维有序数据:列表
* 一维无需数据:集合

#### 存储

* 空格分隔
* 逗号分隔
* 其他方式(特殊符号)

#### 处理

* 从空格分隔的文件中读入数据

  ```
  txt = open(fname).read()
  ls = txt.split()
  f.close()
  ```

* 从特殊符号分隔的文件中读入数据

  ```
  以'$'举例
  txt = open(fname).read()
  ls = txt.split('$')
  f.close()
  ```

* 用空格分隔方式将数据写入文件

  ```
  ls = [ , , , ]
  f = open(fname,'w')
  f.write(' '.join(ls))	用空格作为分隔符,把ls的所有元素转化为一个字符串
  f.close()
  ```

* 用特殊分隔方式将数据写入文件

  ```
  ls = [ , , , ]
  f = open(fname,'w')
  f.write('$'.join(ls))	用空格作为分隔符,把ls的所有元素转化为一个字符串
  f.close()
  ```



#### 2.二维数据

#### 表示

* 列表
* 其余类型



#### CSV数据存储格式

* CSV:Comma-Separated Values	逗号分隔值格式

* 国际通用的一二维数据存储格式	.csv扩展名

* 每行一个以为数据,逗号分隔,无空行
* 元素缺失,逗号仍保留



#### 处理

* 从CSV文件读数据

  ```
  每行信息去掉换行符后,作为列表存到二维列表中
  fo = open(fname)
  ls = []
  for line in fo:
  	line = line.replace("\n","")	去掉换行符
  	ls.append(line.split(","))		去掉逗号,生成列表,并加入二维列表
  fo.close()
  ```

* 将数据写入CSV文件

  ```
  ls = [[], [], [], []]
  f = open(fname,'w')
  for item in ls:
  	f.write(','.join(item) + '\n')	将列表转换为相应格式的字符串
  f.close()
  ```



test

test