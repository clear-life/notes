# vector

size : 实际元素的个数

capacity : 容器的大小

## 插入

平均时间复杂度为 $3$

**记账法**

摊还代价: 预付费用 3(第一次为 2)

**证明:**

n 次插入操作的时间 $f_n = 3n$ 

> vector 初始化 capacity 为 1
>
> 不考虑重新申请内存的开销

第一次:

```C++
预付费用 2
1 用来赋值, 1 存起来
[1]
```

第二次:

```C++
预付费用 3
翻倍: [1] 中的 1 用来数据迁移
3 中的 1 用来赋值, 2 存起来
[0 2]
```

第三次:

```C++
预付费用 3
翻倍: [0 2] 中的 2 用来数据迁移
3 中的 1 用来赋值, 2 存起来
[0 0 2 0]
```

第四次:

```C++
预付费用 3
3 中的 1 用来赋值, 2 存起来
[0 0 2 2]
```

第五次:

```C++
预付费用 3
翻倍: [0 0 2 2] 中的 2 2 用来数据迁移
3 中的 1 用来赋值, 2 存起来
[0 0 0 0 2 0 0 0]
```

第六次:

```C++
预付费用 3
3 中的 1 用来赋值, 2 存起来
[0 0 0 0 2 2 0 0]
```

第 n 次:

```C++
预付费用 3
3 中的 1 用来赋值, 2 存起来
[0 0 0 0 .... 2 2 2 2]
```

总结:

预付总费用 $3n - 1$, 插入 $n$ 次, 平均时间复杂度为**摊还代价O(1)**

## 删除

平均时间复杂度为 $4/3$

**记账法**

摊还代价: 预付费用 $4/3$

第一次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 0 0 0 0 1/3]
```

第二次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 0 0 0 1/3 1/3]
```

第三次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 0 0 1/3 1/3 1/3]
```

第四次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 0 1/3 1/3 1/3 1/3]
```

第五次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 1/3 1/3 1/3 1/3 1/3]
```

第六次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 1/3 1/3 1/3 1/3 1/3 1/3] 还剩费用为 2, 用于数据迁移
[0 0 0 0]
```

第七次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 0 1/3]
```

第 n 次:

```C++
预付费用 4/3
1 用来删除, 1/3 存起来
[0 0 .... 1/3 1/3]
```

总结:

预付总费用 $4n/3$, 删除 $n$ 次, 平均时间复杂度为**摊还代价O(1)**