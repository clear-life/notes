# 数学归纳法解动态规划

### 数学归纳法示例

已知 $a_0 = 0, a_n + 1 = a_{n+1}$，求 $a_{100}$

证:

证明 $a_n = n$, $n \in [0,+\infty)$, $n$ 为整数

1.$n = 0$ 时，$a_0 = 0$, 通项式显然成立

2.假定 $n = k$ 时，$a_k = k$

则 $a_{k+1} = a_k + 1 = k + 1$, 通项式成立

所以 $a_n = n$ 成立，$a_{100} = 100$

## 数学归纳法解动态规划

### 解题步骤

数学归纳法解题步骤: 

1. **分析**
2. **通项**
3. **递推式**
4. **初始化**

#### 1. 分析

* **影响因素**: 对解的影响因素
* **其余因素**: 与解有关，可看作条件

#### 2. 通项

* **下标**: 根据**解的含义**，以**完备性和极小性**为要求，从影响因素中确定下标

  > 完备性: 选定的下标对解是完备的
  >
  > 极小性: 选定的下标没有冗余

* **通项**: 根据**解的含义**和**下标**，定义通项

#### 3. 递推式

* **选择(操作)**: 分情况讨论

  > 选择方式可以不同
  >
  > 如完全背包中，
  >
  > 选择方式1: 选 0~k 个物品后，转到 n-1
  >
  > 选择方式2: 选 0 个转到 n-1，选 1 个后转到 n

* **递推视角**: 递推下标, 递推方向和阶数

  站在 XXX 的视角，研究与 XXX 的关系

* **递推式**: 根据**操作**，分析不同操作下的递推式

#### 4. 初始化

根据**下标**和问题的含义，确定初始化目标及初始值

* **初始化目标**

* **初始值**

### 示例

01背包数学归纳法示例

**1. 分析问题**

* 影响因素: 物品件数 $n$  背包容量 $v$
* 其余因素: 物品体积 $v_i$  物品价值 $w_i$, 物品总体积不超过背包容量，每个物品最多选一个

**2. 通项**

* **下标**: 物品件数 $n$  背包容量 $v$

* **通项**: **$a_{n,v}$** 表物品件数为 $n$, 背包体积为 $v$ 时的最大价值

**3. 递推式**

* **操作与递推视角**: 
  * 选 0 个: $a_{n,v}$ 与 $a_{n-1,?}$
  * 选 1 个: $a_{n,v}$ 与 $a_{n-1,?}$

* **递推式**: $a_{n,v} = \max \{a_{n-1,v},a_{n-1,v-v_n} + w_n\}$

## 经典问题分析

### 完全背包

**1. 分析问题**

* 影响因素: 物品件数 $n$  背包容量 $v$
* 其余因素: 物品体积 $v_i$  物品价值 $w_i$, 物品总体积不超过背包容量，物品数量无限

**2. 通项**

* **下标**: 物品件数 $n$  背包容量 $v$

* **通项**: **$a_{n,v}$** 表物品件数为 $n$, 背包体积为 $v$ 时的最大价值

**3. 递推式**

* **操作与递推视角**: 
  * 选择方式1:
    * 选 0 个: $a_{n,v}$ 与 $a_{n-1,?}$
    * 选 1 个: $a_{n,v}$ 与 $a_{n,?}$
  * 选择方式2:
    * 选 0 个: $a_{n,v}$ 与 $a_{n-1,?}$
    * 选 1 个: $a_{n,v}$ 与 $a_{n-1,?}$
    * ......
    * 选 k 个: $a_{n,v}$ 与 $a_{n-1,?}$

* **递推式**: $a_{n,v} = \max \{a_{n-1,v},a_{n,v-v_n} + w_n\}$

### 多重背包

**1. 分析问题**

* 影响因素: 物品件数 $n$  背包容量 $v$
* 其余因素: 物品体积 $v_i$  物品价值 $w_i$, 物品总体积不超过背包容量，物品数量 $s_i$

**2. 通项**

* **下标**: 物品件数 $n$  背包容量 $v$

* **通项**: **$a_{n,v}$** 表物品件数为 $n$, 背包体积为 $v$ 时的最大价值

**3. 递推式**

* **操作与递推视角**: 
  * 选 0 个: $a_{n,v}$ 与 $a_{n-1,?}$
  * 选 1 个: $a_{n,v}$ 与 $a_{n-1,?}$
  * ......
  * 选 $s_i$ 个: $a_{n,v}$ 与 $a_{n-1,?}$

* **递推式**: $a_{n,v} = \max \{a_{n-1,v-k * v_n} + k*w_n\}$

### 多重背包与完全背包的区别

多重背包不能采用完全背包的方法来做

其中一种分析方式是把表达式完全写出来，发现完全背包能够优化递推式，但多重背包不能用完全背包的方式优化递推式

使用另一种分析方式来说明其中的区别

完全背包递推式: $a_{n,v} = \max \{a_{n-1,v},a_{n,v-v_n} + w_n\}$

多重背包递推式: $a_{n,v} = \max \{a_{n-1,v-k * v_n} + k*w_n\}$

$a_{n,v} = \max \{a_{n-1,v},a_{n,v-v_n} + w_n\}$

错误在于，多重背包环境下 $a_{n,v}$ 表示物品 $n$ 有 $s_i$ 个

选取一个物品 $n$ 后，剩余 $s_i - 1$ 个物品 $n$

但 $a_{n,v-v_n}$ 却对应 $s_i$ 个物品 $n$ 的情景，

因此不能使用完全背包递推式 $a_{n,v} = \max \{a_{n-1,v},a_{n,v-v_n} + w_n\}$